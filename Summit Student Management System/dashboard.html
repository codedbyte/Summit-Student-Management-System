<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Management Dashboard</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/navbar.css">
    <link rel="stylesheet" href="assets/css/modal.css">
    <link rel="stylesheet" href="assets/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div id="top-bar" class="d-md-none fixed-top bg-primary text-white p-2">
        <div class="flex-item">
            <div>
                <img src="/assets/img/logo.png" alt="Logo" class="me-2" style="width: 40px; height: auto;">
            </div>
            <div>
                <button id="menu-toggle" style="float: right;" class="btn btn-light">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        <div id="top-bar-links" class="mt-2 d-none text-center">
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle w-100 text-center" href="dashboard.html" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
            </div>
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle w-100 text-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-user-graduate"></i> Students <i class="fas fa-chevron-down"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="add-student.html"><i class="fas fa-user-plus"></i> Add Student</a></li>
                    <li><a class="dropdown-item" href="view-students.html"><i class="fas fa-users"></i> View Students</a></li>
                    <li><a class="dropdown-item" href="update-student.html"><i class="fas fa-user-edit"></i> Update Student</a></li>
                    <li><a class="dropdown-item" href="delete-student.html"><i class="fas fa-user-times"></i> Delete Student</a></li>
                </ul>
            </div>
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle w-100 text-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-calendar-alt"></i> Attendance <i class="fas fa-chevron-down"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="mark-attendance.html"><i class="fas fa-calendar-check"></i> Mark Attendance</a></li>
                    <li><a class="dropdown-item" href="view-attendance.html"><i class="fas fa-calendar-day"></i> View Attendance</a></li>
                </ul>
            </div>
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle w-100 text-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-bell"></i> Notifications <i class="fas fa-chevron-down"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="send-notifications.html"><i class="fas fa-bell"></i> Send Notifications</a></li>
                </ul>
            </div>
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle w-100 text-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-cogs"></i> Settings <i class="fas fa-chevron-down"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="profile-settings.html"><i class="fas fa-user-cog"></i> Profile Settings</a></li>
                    <li><a class="dropdown-item" href="logout.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div id="sidebar" class="d-none d-md-flex flex-column bg-primary text-white">
        <div class="logo-container">
            <img src="assets/img/logo.png" alt="Logo" class="logo-img">
        </div>
        <ul class="nav nav-pills flex-column mb-auto">
            <li class="nav-item">
                <a href="dashboard.html" class="nav-link text-white">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a href="add-student.html" class="nav-link text-white">
                    <i class="fas fa-user-plus"></i> Add Student
                </a>
            </li>
            <li class="nav-item">
                <a href="view-students.html" class="nav-link text-white">
                    <i class="fas fa-users"></i> View Students
                </a>
            </li>
            <li class="nav-item">
                <a href="update-student.html" class="nav-link text-white">
                    <i class="fas fa-user-edit"></i> Update Student
                </a>
            </li>
            <li class="nav-item">
                <a href="delete-student.html" class="nav-link text-white">
                    <i class="fas fa-user-minus"></i> Delete Student
                </a>
            </li>
            <li class="nav-item">
                <a href="view-academic-records.html" class="nav-link text-white">
                    <i class="fas fa-graduation-cap"></i> View Academic Records
                </a>
            </li>
            <li class="nav-item">
                <a href="update-academic-records.html" class="nav-link text-white">
                    <i class="fas fa-edit"></i> Update Academic Records
                </a>
            </li>
            <li class="nav-item">
                <a href="mark-attendance.html" class="nav-link text-white">
                    <i class="fas fa-check-square"></i> Mark Attendance
                </a>
            </li>
            <li class="nav-item">
                <a href="view-attendance.html" class="nav-link text-white">
                    <i class="fas fa-calendar-alt"></i> View Attendance
                </a>
            </li>
            <li class="nav-item">
                <a href="send-notifications.html" class="nav-link text-white">
                    <i class="fas fa-bell"></i> Send Notifications
                </a>
            </li>
            <li class="nav-item">
                <a href="student-profile.html" class="nav-link text-white">
                    <i class="fas fa-id-card"></i> Student Profile
                </a>
            </li>
            <li class="nav-item">
                <a href="generate-reports.html" class="nav-link text-white">
                    <i class="fas fa-file-alt"></i> Generate Reports
                </a>
            </li>
            <li class="nav-item">
                <a href="search-student.html" class="nav-link text-white">
                    <i class="fas fa-search"></i> Search Student
                </a>
            </li>
        </ul>

        <div class="mt-auto">
            <ul class="nav nav-pills flex-column">
                <li class="nav-item">
                    <a href="profile-settings.html" class="nav-link text-white">
                        <i class="fas fa-user-cog"></i> Profile Settings
                    </a>
                </li>
                <li class="nav-item">
                    <a href="logout.html" class="nav-link text-white">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </li>
            </ul>
        </div>

        <footer class="text-center py-3 d-none d-md-block">
            <p class="mb-0">&copy;2024</p>
            <p class="mb-0">Student Management System</p>
        </footer>
    </div>

    <div class="main-content p-4">
        <h2 class="pb-2">Student Management Dashboard</h2>

        <div class="card-deck mb-4">
            <div class="card">
                <div class="card-body text-center">
                    <h5 class="card-title"><i class="fas fa-users"></i> Total Students</h5>
                    <p class="card-text display-4" id="total-students"></p>
                    <p class="text-muted">Current Enrolled Students</p>
                </div>
            </div>
            <div class="card">
                <div class="card-body text-center">
                    <h5 class="card-title"><i class="fas fa-calendar-check"></i> Attendance Rate</h5>
                    <p class="card-text display-4" id="attendance-rate"></p>
                    <p class="text-muted">Current Attendance Rate</p>
                </div>
            </div>
            <div class="card">
                <div class="card-body text-center">
                    <h5 class="card-title"><i class="fas fa-bell"></i> Notifications</h5>
                    <p class="card-text display-4" id="notifications-count"></p>
                    <p class="text-muted">Unread Notifications</p>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="fas fa-calendar-alt"></i> Attendance Overview</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="attendanceChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="fas fa-chart-line"></i> Academic Performance</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title"><i class="fas fa-file-alt"></i> Reports</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Report Type</th>
                                    <th>View Report</th>
                                    <th>Download Report</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Student Enrollment</td>
                                    <td>
                                        <a href="assets/php/generate_view_report.php?report_type=enrollment" 
                                           class="btn btn-primary btn-sm view-report btn-view">View Report</a>
                                    </td>
                                    <td>
                                        <a href="assets/php/download_report.php?report_type=enrollment" 
                                           class="btn btn-primary btn-sm btn-download">Download Report</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Attendance Summary</td>
                                    <td>
                                        <a href="assets/php/generate_view_report.php?report_type=attendance" 
                                           class="btn btn-primary btn-sm view-report btn-view">View Report</a>
                                    </td>
                                    <td>
                                        <a href="assets/php/download_report.php?report_type=attendance" 
                                           class="btn btn-primary btn-sm btn-download">Download Report</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Academics</td>
                                    <td>
                                        <a href="assets/php/generate_view_report.php?report_type=academics" 
                                           class="btn btn-primary btn-sm view-report btn-view">View Report</a>
                                    </td>
                                    <td>
                                        <a href="assets/php/download_report.php?report_type=academics" 
                                           class="btn btn-primary btn-sm btn-download">Download Report</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal Structure -->
        <div id="reportModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="reportContent"></div> <!-- Dynamic content goes here -->
            </div>
        </div>
        
        

    </div>

    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/card.js"></script>
    <script src="assets/js/academics.js"></script>
    <script src="assets/js/attendance-chart.js"></script>
    <script src="assets/js/attendance-rate.js"></script>
    <script src="assets/js/navbar.js"></script>
    <script src="assets/js/modal-view.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Function to fetch and update total students count
function updateStudentsCount() {
    fetch('assets/php/get_students_count.php')
        .then(response => response.json())
        .then(data => {
            document.getElementById('total-students').textContent = data.count;
        })
        .catch(error => console.error('Error fetching students count:', error));
}

// Auto-update the students count every 10 seconds
setInterval(updateStudentsCount, 10000);

// Initial load of the students count
updateStudentsCount();

    </script>
</body>

</html>

